<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			*{
				margin: 0px;
				padding: 0px;
			}
			.wrap{
				width: 343px;
				height: 480px;
				margin: 100px auto;
				position: relative;
				background-image: url('./img/bg.jpg');
				overflow: hidden;
				font-size: 0px;
			}
			.grass{
				width: 686px;
				position: absolute;
				bottom: 42px;
				left: 0px;
			}
			.grass img{
				float: left;
			}
			.bird{
				position: absolute;
				top: 200px;
				left: 30px;
				/* border: 1px solid red; */
			}
		</style>
	</head>
	<body>
		<div class="wrap">
			<div class="bird">
				<img src="./img/bird1.png" >
			</div>
			<div class="grass">
				<img src="./img/banner.jpg" />
			</div>
		<!-- 	<audio src="./img/aaa.mp3" id="bgMuisc"></audio>
			<audio src="./img/bbb.mp3" id="gameMuisc"></audio> -->
		</div>
	</body>
	<script type="text/javascript">
		 var  grassDiv = document.querySelector('.grass');
		 // 改变元素后 获取不到宽度
		 // var  grassObj = grassDiv.firstElementChild;
		 var  wrap = document.querySelector('.wrap');
		 // 新添加草
		 grassDiv.innerHTML += grassDiv.innerHTML;
		 // console.log(grassDiv.children.length * grassDiv.children[0].offsetWidth);
		 // 草容器的宽度
		 grassDiv.style.width = grassDiv.children.length * grassDiv.children[0].offsetWidth + 'px';
		 
		 // 速度
		 var speed = 0;
		 // 草滚动的效果
		 var gressTimer = setInterval(function(){
			 speed += 2
			 // 判断一个草是否已经走过去。
			 if(speed >= wrap.offsetWidth){
				 speed = 0;
			 }
			 grassDiv.style.left = -speed + 'px';
			 // console.log(grassDiv.offsetLeft);
		 },30);
	
		 // 鸟的飞翔
		 var  bird = document.querySelector('.bird');
		 // 速度
		 bird.speed = 0;
		 var prev; // 上一次的位置
		 bird.birdTimer = setInterval(function(){
			 // 速度
			 bird.speed += 0.5
			 // 控制鸟飞翔的最大速度
			 if(bird.speed >= 10){
				 bird.speed = 10;
			 }
			 // 鸟要飞翔的位置
			 var currPos = bird.offsetTop + bird.speed;
			 if(currPos > prev){ 
				 // 向下飞
				 bird.children[0].src = './img/down_bird0.png';
			 }else{
				 // 向上飞
				 bird.children[0].src = './img/up_bird.png';
			 }
			 // 控制鸟当前的位置
			 bird.style.top = currPos + 'px';
			 
			 // 判断游戏是否结束
			 if(bird.offsetTop <=0 || bird.offsetTop >= (grassDiv.offsetTop - bird.offsetHeight)){
				 clearInterval(bird.birdTimer);
				 clearInterval(gressTimer);
			 }
			 
			 prev = bird.offsetTop;
		 },30);
		 
		 wrap.onclick = function(){
			 bird.speed = -10;
		 };
		 //播放音乐
		 var bgMuisc = document.getElementById('bgMuisc');
		 var gameMuisc = document.getElementById('gameMuisc');
		 // document.onclick = function(){
			//  bgMuisc.play();
			//  bgMuisc.loop = true;
		 // };
	</script>
</html>
